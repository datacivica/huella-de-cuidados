a <- readRDS("data-raw/descriptives/out/o_d_tograf.rds")
readRDS("data-raw/import-clean/out/enut.rds")
aver <- readRDS("/Users/aliciavalentina/Documents/DC/premio-gabo-cuidados/data-raw/import-clean/out/enut_nac.rds")
View(aver)
4.2*7
40.3/7
aver_2 <- readRDS("/Users/aliciavalentina/Documents/DC/premio-gabo-cuidados/data-raw/import-clean/out/enut_nac.rds")
View(aver_2)
aver_2 <- readRDS("/Users/aliciavalentina/Documents/DC/premio-gabo-cuidados/data-raw/import-clean/out/enut.rds")
tempo <- aver_2 %>% filter(sexo == "hombre", niv == "Secundaria", trab_dom == "No contrata", tiene_hij == "Sí tiene", pareja == "No tiene")
require(tidyverse)
tempo <- aver_2 %>% filter(sexo == "hombre", niv == "Secundaria", trab_dom == "No contrata", tiene_hij == "Sí tiene", pareja == "No tiene")
View(tempo)
tempo <- aver_2 %>% filter(sexo == "hombre", niv == "Secundaria", trab_dom == "No contrata", tiene_hij == "Sí tiene", pareja == "No tiene", region == "Aridoamérica Oriental")
tempo <- aver_2 %>% filter(sexo == "hombre", niv == "Secundaria", trab_dom == "No contrata", tiene_hij == "Sí tiene", pareja == "No tiene", region == "Aridoamérica Oriental") %>%
)
sum(tempo$hrs_cuidado)
sum(fac_per)
sum(tempo$fac_per)
tempo <- aver_2 %>% filter(sexo == "hombre", niv == "Secundaria", trab_dom == "No contrata", tiene_hij == "Sí tiene", pareja == "No tiene", region == "Aridoamérica Oriental") %>% mutate(fac_tot = fac_per*hrs_cuidado)
sum(tempo$fac_per)
sum(tempo$fac_tpt)
sum(tempo$fac_tot)
962514.6/32649
nac <- 32.24763
(962514.6/32649) - 29.48068
29.48068 - nac
View(aver)
#### Paquetería ####
if(!require(pacman)) install.packages("pacman")
rm(list=ls())
#### Paquetería ####
if(!require(pacman)) install.packages("pacman")
pacman::p_load(tidyverse, here, googledrive, data.table, janitor)
#### Acceso Google Drive ####
options(gargle_oob_default = TRUE)
#### Archivero ####
paths <- list(
inp = drive_ls(as_id("1iy8MBYHK8BJPvQa-h7-AF5PVV9qF4Ua2")),
out = here("data-raw/import-clean/out/")
)
#### Acceso Google Drive ####
options(gargle_oob_default = TRUE)
#### Paquetería ####
if(!require(pacman)) install.packages("pacman")
pacman::p_load(tidyverse, here, googledrive, data.table, janitor)
#### Acceso Google Drive ####
options(gargle_oob_default = TRUE)
#### Archivero ####
paths <- list(
inp = drive_ls(as_id("1iy8MBYHK8BJPvQa-h7-AF5PVV9qF4Ua2")),
out = here("data-raw/import-clean/out/")
)
#### Functions ####
read_clean <- function(dirs){
df <- fread(dirs) %>%
clean_names()
if(str_detect(dirs,"tmodulo")){
df <- df %>%
select(
any_of(var_to_select),
#módulo
"ent", "edad_v", "niv","p4_4", #pareja
## beneficios
"p5_6_1","p5_6_4","p5_6_5",
##cuidados
starts_with("p6_11"), # cuidados básicos que le dedicó a otras personas
### a integrantes de 0a5 ¡
starts_with("p6_12"),
### a integrantes de 0a14
starts_with("p6_13"),
### a integrantes de 15a59
starts_with("p6_14"),
### integrantes 60+
starts_with("p6_15"),
##labores domésticas para consumo del hogar
starts_with("p6_3"), #cuidar animales
starts_with("p6_4"), #desgranar
starts_with("p6_5"), # barrer
starts_with("p6_6"), # arreglar ropa, manteles cortinas o sábanas
starts_with("p6_7"), #reparar medios de transporte del hogar
starts_with("p6_8"), #comprar refacciones
starts_with("p6_9"), #pagar sercicios
starts_with("p6_10")) #llevar a arreglar ropa
}
if(str_detect(dirs,"thogar")){
df <- df %>%
select(any_of(var_to_select),
"p2_4_8","p2_6_1", "p2_6_2", "p2_6_3",
"p3_11", "p2_8_1", "p2_8_2", "p2_8_3") %>%
mutate(id_viv = paste(str_pad(upm, width = 7, pad = "0", side = "left"),
str_pad(viv_sel, width = 2, pad = "0", side = "left"),
hogar,
sep = "."))
}
if(str_detect(dirs,"sdem")){
df <- df %>%
select(any_of(var_to_select),
"paren", "sexo", "edad",
"p3_7", "p3_8", "p3_9", "p3_10", "p3_11b")
}
if(str_detect(dirs,"sdem|modulo")){
df <- df %>%
mutate(id_per = paste(str_pad(upm, width = 7, pad = "0", side = "left"),
str_pad(viv_sel, width = 2, pad = "0", side = "left"),
hogar,
str_pad(n_ren, width = 2, pad = "0", side = "left"),
sep = "."
))
}
df<- df
}
#### Import ####
tables <- paste0("conjunto_de_datos_t", c("hogar", "sdem", "modulo"), "_enut_tradicional_2019.csv")
var_to_select <- c("fac_per", "upm", "viv_sel", "hogar", "n_ren", "ent")
#### Downloading ####
to_imp <- which(str_detect(paths$inp$name, tables))
tmp <- paste(tempdir(), paths$inp$name[to_imp], sep = "/")
#### Archivero ####
paths <- list(
inp = drive_ls(as_id("1iy8MBYHK8BJPvQa-h7-AF5PVV9qF4Ua2")),
out = here("data-raw/import-clean/out/")
)
#### Acceso Google Drive ####
options(gargle_oob_default = TRUE)
